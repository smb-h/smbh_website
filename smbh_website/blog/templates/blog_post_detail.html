 {% extends "blog.html" %} {% load static %} {% load i18n %} {% block title %} {{ post.title }} | SMBH {% endblock title %}
 {% load l10n %} {% load crispy_forms_tags %}
{% block PostList %}


<!-- Post description -->
<div class="container jumbotron" id="PostDetail" style="margin-top: 60px;">


  <!-- image -->
  <div class="overlay rounded z-depth-2 mb-lg-0 mb-4">
    <img class="img-fluid" src="{{ post.image.url }}" alt="{{ post.title }}" />
    <a>
      <div class="mask rgba-white-slight"></div>
    </a>
  </div>


  <br/>
  <br/>
  <!-- Post title -->
  <h3 class="font-weight-bold mb-3">
    <strong>{{ post.title }}</strong>
  </h3>
  <!-- Excerpt -->
  {% if LANGUAGE_CODE == 'en' %}
  <div style="text-align: left;">
    <p class="content-markdown">
      {{ post.content | safe }}
    </p>
  </div>
  <!-- Post footer -->
  <hr/>
  <p style="text-align: center;">By
    <a>
      <strong> {{ post.author.get_full_name }} </strong>
    </a>, {{ post.publish | localize}}</p>
  {% else %}
  <div style="text-align: right;">
    <p class="content-markdown">
      {{ post.content | safe }}
    </p>
  </div>
  <!-- Post data -->
  <hr/>
  <p style="text-align: center;">By
    <a>
      <strong> {{ post.author.get_full_name }} </strong>
    </a> <br />{{ post.publish | localize }}</p>
  {% endif %}

  <!-- Tags -->
  <div class="row">
    {% for tag in post.tags.names %}
    <a style="color: royalblue;">
      <h6 class="font-weight-bold mb-3">

        <i class="pr-3">
          #{{ tag }}
        </i>

      </h6>
    </a>
    {% endfor %}
  </div>




  <!-- Share -->
  <span>Share : </span>
  <a href="https://www.facebook.com/sharer/sharer.php?u={{ request.build_absolute_uri }}">
  Facebook
  </a>

  <a href="https://twitter.com/home?status=I'{{ share_content | safe | truncatechars_html:80 }}%20{{ request.build_absolute_uri }}">
  Twitter
  </a>

  <a href='https://plus.google.com/share?url={{ request.build_absolute_uri }}'>Google+</a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url={{ request.build_absolute_uri }}&title={{ post.title }}&summary={{ share_content | safe | truncatechars_html:80 }}&source={{ request.build_absolute_uri }}">
  Linkedin
  </a>

  <a href="http://www.reddit.com/submit?url={{ request.build_absolute_uri }}&title={{ share_content | safe | truncatechars_html:80 }}">Reddit</a>


  <hr />


  <!-- Form Errors -->
  {% if form.errors %}
  <div class="alert alert-danger" role="alert">
    {% for err in form.errors %} {{ err }} {% endfor %}
  </div>
  {% endif %}


  <!-- Comments -->
  <h1>Comments</h1>
  <br />
  <div class="lead">
    {% if request.user.is_authenticated %}
      <form method="POST"> {% csrf_token %}
          {{ form | crispy }}
          <button type="submit" class="btn btn-default">Send</button>
      </form>
    {% else %}
      <p>You must login to comment. </p>
    {% endif %}

    
    <!-- Use Property -->
    {% comment %} {% for comment in post.comments %} {% endcomment %}
    <!-- Use Context -->
    {% for comment in comments %}
      <blockquote class="blockquote text-left">
          <p class="mb-0">{{ comment.content | safe }}</p>
          <footer class="blockquote-footer text-center">{{ comment.user }} | <cite title="Source Title">{{ comment.timestamp }}</cite>
            {% if comment.children.count > 0 %}
              | {{ comment.children.count }} Comment
            {% endif %}
            <a href="#" class="comment-reply-btn btn btn-outline-amber btn-sm">Reply</a>
            <a href="{{ comment.get_absolute_url }}" class="btn btn-outline-dark-green btn-sm">Thread</a>
          </footer>

        
        <!-- Reply -->  
        <div class="comment-reply">

          {% for child_comment in comment.children %}
            <blockquote class="blockquote text-left">
                <p class="mb-0">{{ child_comment.content | safe }}</p>
                <footer class="blockquote-footer text-center">{{ child_comment.user }} | <cite title="Source Title">{{ child_comment.timestamp }}</cite></footer>
            </blockquote>
          {% endfor %}


          {% if request.user.is_authenticated %}
            <form method="POST"> {% csrf_token %}
              {{ form.media }}
              {{ form | crispy }}
              <input type="hidden" name="parent_id" value="{{ comment.id }}" />
              <button type="submit" class="btn btn-default">Reply</button>
            </form>
          {% else %}
            <p>You must login to comment. </p>
          {% endif %}

        </div>

      </blockquote>
      <!-- Access Post From Comment -->
      {% comment %} {{ comment.content_object }} {% endcomment %}

      <hr />
    {% endfor %}

  </div>

  
</div>



{% endblock PostList %}
