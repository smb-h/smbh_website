{% extends "blog.html" %}
{% load crispy_forms_tags %}


{% block title %}
{{ comment.content_object }} | {{ block.super }}
{% endblock title %}



{% block PostList %}



<div class='container' id="Thread">
    <div class='jumbotron'>

        

        <blockquote class="blockquote text-left">

            <p class="mb-0">{{ comment.content | safe }}</p>
            <footer class="blockquote-footer text-center">{{ comment.user }} | <cite title="Source Title">{{ comment.timestamp }}</cite>
                {% if comment.children.count > 0 %}
                | {{ comment.children.count }} Comment
                {% endif %}
                {% if request.user == comment.user %}<a href='{{ comment.get_delete_url }}' class="btn btn-outline-danger btn-sm">Delete</a> {% endif %}

            </footer>

        </blockquote>



        <hr/>
        <div>
            {% for child_comment in comment.children %}

                <blockquote class="blockquote text-left">

                    <p class="mb-0">{{ child_comment.content | safe }}</p>
                    <footer class="blockquote-footer text-center">{{ child_comment.user }} | <cite title="Source Title">{{ child_comment.timestamp | timesince }} ago</cite>
                        {% if request.user == comment.user %}<a href='{{ child_comment.get_delete_url }}' class="btn btn-outline-danger btn-sm">Delete</a> {% endif %}

                    </footer>

                </blockquote>

            {% endfor %}

            {% if request.user.is_authenticated %}
                <form method="POST" action=""> {% csrf_token %}
                    {{ form | crispy }}
                    <input type='hidden' name='parent_id' value='{{ comment.id }}'>
                    <input type='submit' value='Reply' class='btn btn-default'>
                </form>
            {% else %}
                <p>You must login to comment. </p>
            {% endif %}
        </div>

    

        <hr/>
    </div>
</div>


{% endblock PostList %}
